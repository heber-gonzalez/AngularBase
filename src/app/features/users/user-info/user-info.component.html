<p-confirmPopup key="user-info" />
<div class="navbar bg-base-100">
    <div class="flex-none">
        <p-button (onClick)="confirmCancel($event)" icon="pi pi-times" [rounded]="true" [text]="true" severity="secondary" />
    </div>
    <div class="flex-1">
      <h2 class="text-xl px-2 font-bold">EDITAR USUARIO</h2>
    </div>
    <div class="flex-none">
        <p-button (click)="confirmSave($event)" icon="pi pi-check" [rounded]="true" [text]="true" severity="success" />
    </div>
  </div>
<div class="flex justify-center px-10 place-content-center bg-base-200" style="height: 85vh;" data-theme="night">
    <ng-container *ngIf="loading; else loaded">
        <app-loading></app-loading>
    </ng-container>

    <ng-template #loaded>
        <div class="card card-compact pt-5 w-full bg-base-100 shadow-xl">
            <div class="card-body">
                <form [formGroup]="editUserForm">
                    <div class="grid grid-cols-2 gap-2">
                        <div class="py-2">
                            <label class="input input-bordered flex items-center gap-2 disabled" [ngClass]="{'input-error': editUserForm.controls.names.invalid && editUserForm.controls.names.touched}">
                                <input type="text" class="grow py-2 disabled" placeholder="NOMBRES" formControlName="names"/>
                            </label>
                        </div>
                        <div class="py-2">
                            <label class="input input-bordered flex items-center gap-2 disabled" [ngClass]="{'input-error': editUserForm.controls.firstLastName.invalid && editUserForm.controls.firstLastName.touched}">
                                <input type="text" class="grow py-2" placeholder="APELLIDO PATERNO" formControlName="firstLastName"/>
                            </label>
                        </div>
                        <div class="py-2">
                            <label class="input input-bordered flex items-center gap-2 disabled" [ngClass]="{'input-error': editUserForm.controls.secondLastName.invalid && editUserForm.controls.secondLastName.touched}">
                                <input type="text" class="grow py-2" placeholder="APELLIDO MATERNO" formControlName="secondLastName"/>
                            </label>
                        </div>
                        <div class="py-2">
                            <label class="input input-bordered flex items-center gap-2 disabled" [ngClass]="{'input-error': editUserForm.controls.employeeId.invalid && editUserForm.controls.employeeId.touched}">
                                <input type="text" class="grow py-2" placeholder="NÃšMERO DE EMPLEADO" formControlName="employeeId"/>
                            </label>
                        </div>
                        <div class="py-2">
                            <label class="input input-bordered flex items-center gap-2 disabled" [ngClass]="{'input-error': editUserForm.controls.username.invalid && editUserForm.controls.username.touched}">
                                <input type="text" class="grow py-2" placeholder="NOMBRE DE USUARIO" formControlName="username"/>
                            </label>
                            
                        </div>
                        <div class="py-2">
                            <label class="label cursor-pointer">
                                <span class="label-text">ESTATUS</span>
                                <input type="checkbox" class="toggle toggle-info" (change)="changeStatus($event)" formControlName="status" />
                            </label>
                        </div>
                    </div>
                    <div class="w-full py-4">
                        <p-multiSelect 
                            [style]="{'width':'100%'}"
                            [loading]="loading"
                            [options]="permissions" 
                            [filter]="true"
                            class=" disabled"
                            formControlName="permissions" 
                            optionLabel="nombre" 
                            placeholder="Permisos"
                            optionValue="id"
                        />
                        
                    </div>
                    <div class="w-full py-4">
                        
                    </div>
    
                
                
                
                
                
                </form>
              
            </div>
        </div>
    
        <ng-container *ngIf="!editing">
            <p-confirmPopup key="edit" />
    
            <button (click)="edit()" class="btn btn-circle btn-outline absolute bottom-5 right-5">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
                    <path stroke-linecap="round" stroke-linejoin="round" d="m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125" />
                </svg>
                    
            </button>
        </ng-container>
    </ng-template>
    

    

    

</div>